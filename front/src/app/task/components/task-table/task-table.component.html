<app-task-filter label="Filtrar por rol de asignaci贸n" [rolesOption]="rolesOption" [tableField]="'type'"
  (filterChange)="applyFilter($event)"></app-task-filter>
<div class="mat-elevation-z8">
  <table mat-table [dataSource]="dataSource">

    <!-- Position Column -->
    <ng-container matColumnDef="description">
      <th class="bg-header-table" mat-header-cell *matHeaderCellDef>Descripci贸n </th>
      <td mat-cell *matCellDef="let element"> {{element.description}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="end_date">
      <th class="bg-header-table" mat-header-cell *matHeaderCellDef>Fecha de Entrega</th>
      <td mat-cell *matCellDef="let element"> {{ element.end_date | date:'dd-MM-yyyy' }} </td>
    </ng-container>
    <ng-container matColumnDef="type">
      <th class="bg-header-table" mat-header-cell *matHeaderCellDef>Asignaci贸n</th>
      <td mat-cell *matCellDef="let element"> {{ getRoleDescription(element.type) ? getRoleDescription(element.type):
        element.Users[0]?.first_name+' '+ element.Users[0].last_name }} </td>
    </ng-container>


    <!-- Symbol Column -->
    <ng-container matColumnDef="accion">
      <th class="text-center align-middle gap-2 bg-header-table" mat-header-cell *matHeaderCellDef> Acci贸n </th>
      <td mat-cell *matCellDef="let element">
        <div class="d-flex justify-content-center gap-2 justify-content-md-center">
          <button mat-mini-fab aria-label="Example icon button with a delete icon"
            (click)="userAssigned(element.Users, element)" title="Usuarios asignados">
            <mat-icon>group</mat-icon>
          </button>
          <button mat-mini-fab aria-label="Example icon button with a delete icon"
          (click)="documentAssigned(element.Documents, element)" title="Usuarios asignados">
          <mat-icon class="text-secondary">description</mat-icon>
        </button>
          <button mat-mini-fab aria-label="Example icon button with a delete icon" title="Usuarios asignados"
            (click)="edit( element)" title="Editar evento">
            <mat-icon class="text-primary">edit</mat-icon>
          </button>
          <button mat-mini-fab aria-label="Example icon button with a delete icon" title="Usuarios asignados"
          (click)="delet( element)" title="Editar evento">
          <mat-icon class="text-danger">delete</mat-icon>
        </button>
        </div>
      </td>
    </ng-container>
    <tr class="mat-row " *matNoDataRow>
      <td class="mat-cell" colspan="4">No hay eventos en el sistema </td>
    </tr>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
  </mat-paginator>
</div>
